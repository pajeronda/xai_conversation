# Services for xAI Conversation integration
ask:
  name: Ask AI (Generate Response)
  description: >
    Send instructions and data to xAI and get a raw response.
    Ideal for automations that need to process data (e.g., JSON) and get a text output.
    Returns the result in a 'response_variable'.
  fields:
    instructions:
      name: Instructions
      description: >
        What the AI should do with the data. Acts as the System Prompt.
        Example: "Summarize this weather data into a short spoken report."
      required: true
      selector:
        text:
          multiline: true
    input_data:
      name: Input Data
      description: >
        The content or data to process. Can be text, JSON, or template output.
        Example: "{{ states('weather.home') }}"
      required: true
      selector:
        text:
          multiline: true
    model:
      name: Model
      description: Optional specific model to use (e.g., 'grok-4'). Defaults to configured chat model.
      required: false
      selector:
        text:
    max_tokens:
      name: Max Tokens
      description: Limit response length.
      required: false
      selector:
        number:
          min: 1
          max: 100000
    temperature:
      name: Temperature
      description: Creativity (0.0 = precise, 1.0 = creative).
      required: false
      selector:
        number:
          min: 0
          max: 2
          step: 0.1
    top_p:
      name: Top P
      description: Nucleus sampling (determines diversity). Recommended 1.0 for logic/code.
      required: false
      selector:
        number:
          min: 0
          max: 1
          step: 0.05
    reasoning_effort:
      name: Reasoning Effort
      description: >
        For reasoning models only. Controls how much time/effort the model spends thinking.
        Values: low, medium, high, max.
      required: false
      selector:
        select:
          options:
            - label: "Low"
              value: "low"
            - label: "Medium"
              value: "medium"
            - label: "High"
              value: "high"
            - label: "Max"
              value: "max"
    live_search:
      name: Live Search
      description: Enable server-side tools (Web/X Search). Defaults to 'off'.
      required: false
      default: "off"
      selector:
        select:
          options:
            - label: "Off"
              value: "off"
            - label: "Web Search"
              value: "web search"
            - label: "X Search"
              value: "x search"
            - label: "Full (Web + X)"
              value: "full"
    show_citations:
      name: Show Citations
      description: >
        Append search citations to the response when live_search is enabled.
        Useful for tracking sources. Default: off.
      required: false
      default: false
      selector:
        boolean:

clear_memory:
  name: Clear Conversation Memory
  description: >
    Clear conversation memory for selected users or voice satellites.
    The service automatically handles both local and server-side data based on your configuration.
  fields:
    user_id:
      name: Users
      description: Select users whose conversation history should be cleared
      required: false
      selector:
        entity:
          multiple: true
          filter:
            - domain: person
    satellite_id:
      name: Voice Satellites
      description: Select voice assistant devices whose conversation history should be cleared
      required: false
      selector:
        entity:
          multiple: true
          filter:
            - domain: assist_satellite
    delete_all:
      name: Delete All
      description: Clear ALL conversation memory (all users and devices). Use with caution.
      required: false
      default: false
      selector:
        boolean:
    include_server:
      name: Include Server Data
      description: Also delete conversations stored on xAI servers (if any). Local-only data (ZDR mode) is always cleared.
      required: false
      default: true
      selector:
        boolean:
    only_inactive:
      name: Only Inactive Conversations
      description: Only clear conversations that have been inactive for more than the configured period (default 28 days).
      required: false
      default: false
      selector:
        boolean:

manage_sensors:
  name: Manage Sensors
  description: >
    Perform maintenance operations on xAI integration sensors.
    Select one or both actions to execute.
  fields:
    reload_pricing:
      name: Reload Pricing Data
      description: Force refresh of model pricing data from xAI API.
      required: false
      default: false
      selector:
        boolean:
    reset_stats:
      name: Reset Token Statistics
      description: Reset all token usage counters to zero.
      required: false
      default: false
      selector:
        boolean:
              
photo_analysis:
  name: Photo Analysis
  description: >
    Analyze one or multiple photos using Grok Vision AI.
    Supports both local file paths and URLs. Can process documents, diagrams, charts, screenshots, and photographs.
  fields:
    prompt:
      name: Prompt
      description: Question or instruction about the images (e.g., "What objects are visible?", "Which animal looks happier?")
      required: true
      example: "Describe what you see in these images"
      selector:
        text:
          multiline: true
    images:
      name: Images
      description: >
        List of image paths or URLs to analyze. Can be a single string or list of strings.
        Examples: "/config/www/photo.jpg" or ["https://example.com/img1.jpg", "/local/img2.png"]
      required: false
      example: ["/config/www/camera_snapshot.jpg"]
      selector:
        object:
    temperature:
      name: Temperature
      description: Creativity (0.0 = precise, 1.0 = creative).
      required: false
      selector:
        number:
          min: 0
          max: 2
          step: 0.1
    top_p:
      name: Top P
      description: Nucleus sampling (determines diversity). Recommended 1.0 for logic/code.
      required: false
      selector:
        number:
          min: 0
          max: 1
          step: 0.05
    model:
      name: Model
      description: Vision model to use. Defaults to a Grok model with vision capabilities.
      required: false
      selector:
        text:

