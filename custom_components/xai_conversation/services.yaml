# Services for xAI Conversation integration
clear_memory:
  name: Clear Conversation Memory
  description: >
    Delete conversation memory for selected users/satellites, or entire storage file.
    NOTE: This will clear ALL conversation histories for the selected users/satellites,
    including conversations with different assistant names, custom prompts, and control modes.
  fields:
    user_id:
      name: Users
      description: Select specific users to clear memory for
      required: false
      selector:
        entity:
          multiple: true
          filter:
            - domain: person
    satellite_id:
      name: Assist Satellites
      description: Select specific voice assistant satellites to clear memory for
      required: false
      selector:
        entity:
          multiple: true
          filter:
            - domain: assist_satellite
    delete_storage_file:
      name: Delete all
      description: Clear all memory data for user and device satellites
      required: false
      default: false
      selector:
        boolean:
        
reset_token_stats:
  name: Reset Token Statistics
  description: Reset all token sensors for the entire xAI Conversation integration. Useful when you reload credits on xAI and want to track consumption from that point.

reload_pricing:
  name: Reload Pricing Data
  description: >
    Manually triggers an update of the xAI model pricing information from the API.
    This will fetch the latest pricing for all models and update the pricing sensors.
  fields: {}

ask:
  name: Ask AI (Generate Response)
  description: >
    Send instructions and data to xAI and get a raw response.
    Ideal for automations that need to process data (e.g., JSON) and get a text output.
    Returns the result in a 'response_variable'.
  fields:
    instructions:
      name: Instructions
      description: >
        What the AI should do with the data. Acts as the System Prompt.
        Example: "Summarize this weather data into a short spoken report."
      required: true
      selector:
        text:
          multiline: true
    input_data:
      name: Input Data
      description: >
        The content or data to process. Can be text, JSON, or template output.
        Example: "{{ states('weather.home') }}"
      required: true
      selector:
        text:
          multiline: true
    model:
      name: Model
      description: Optional specific model to use (e.g., 'grok-4'). Defaults to configured chat model.
      required: false
      selector:
        text:
    max_tokens:
      name: Max Tokens
      description: Limit response length.
      required: false
      selector:
        number:
          min: 1
          max: 100000
    temperature:
      name: Temperature
      description: Creativity (0.0 = precise, 1.0 = creative).
      required: false
      selector:
        number:
          min: 0
          max: 2
          step: 0.1

photo_analysis:
  name: Photo Analysis
  description: >
    Analyze one or multiple photos using Grok Vision AI.
    Supports both local file paths and URLs. Can process documents, diagrams, charts, screenshots, and photographs.
    Uses the vision model configured in AI Task settings.
  fields:
    prompt:
      name: Prompt
      description: Question or instruction about the images (e.g., "What objects are visible?", "Which animal looks happier?")
      required: true
      example: "Describe what you see in these images"
      selector:
        text:
          multiline: true
    images:
      name: Images
      description: >
        List of image paths or URLs to analyze. Can be a single string or list of strings.
        Examples: "/config/www/photo.jpg" or ["https://example.com/img1.jpg", "/local/img2.png"]
      required: false
      example: ["/config/www/camera_snapshot.jpg"]
      selector:
        object: