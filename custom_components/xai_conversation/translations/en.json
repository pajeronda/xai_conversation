{
  "config": {
    "step": {
      "user": {
        "title": "xAI Conversation Setup",
        "description": "Set up your xAI Conversation integration for Home Assistant. Configure your API key, endpoint, default assistant name, and search mode. Additional settings like extended tools, memory parameters, and conversation-specific configurations can be adjusted later.",
        "data": {
          "api_key": "API Key",
          "api_host": "API Endpoint (default: 'api.x.ai')",
          "assistant_name": "Assistant Name",
          "live_search": "Live Search Mode",
          "send_user_name": "Include user name in messages"
        },
        "data_description": {
          "api_key": "Your xAI API key (starts with 'xai-')",
          "api_host": "API endpoint hostname. Use 'api.x.ai' for global routing or a specific regional endpoint: 'us-east-1.api.x.ai' or 'eu-west-1.api.x.ai'. This endpoint is used globally across all agents.",
          "assistant_name": "The name your assistant will use to identify itself (e.g., 'Jarvis', 'Alexa', 'HAL').",
          "live_search": "Enable web search capabilities: 'off' (disabled), 'web search', 'x search', 'full' (web + x)",
          "send_user_name": "Add the Home Assistant user name to the chat with Grok."
        }
      },
      "confirm": {
        "title": "Confirm API Key Information",
        "description": "API Key validated successfully. Please review the details below:\n\n**Name:** {name}\n**Team ID:** {team_id}\n**Status:** âœ… OK"
      }
    },
    "error": {
      "invalid_api_key": "Invalid API key. It must start with 'xai-'",
      "api_key_disabled": "The API key is disabled in the xAI dashboard.",
      "api_key_blocked": "The API key has been blocked by xAI.",
      "team_blocked": "The associated team account is blocked.",
      "missing_dependency": "Required dependency 'xai_sdk' is not installed.",
      "unknown": "An unexpected error occurred. Please try again."
    },
    "create_entry": {
      "default": "xAI Conversation integration successfully configured!"
    }
  },
  "options": {
    "error": {
      "invalid_yaml": "Invalid YAML configuration. Please check the syntax and required fields."
    },
    "step": {
      "init": {
        "title": "xAI Configuration",
        "description": "Configure memory parameters for users and devices, and set up extended custom tools. The integration automatically detects if a request comes from a user (smartphone/PC/tablet) or a device (voice satellite) and applies the appropriate memory settings.",
        "data": {
          "api_host": "API Endpoint",
          "use_extended_tools": "Enable Extended Tools Configuration",
          "extended_tools_yaml": "Extended Tools YAML Configuration",
          "memory_user_ttl_hours": "User memory TTL (hours)",
          "memory_device_ttl_hours": "Device memory TTL (hours)",
          "memory_remote_delete": "Delete from xAI servers on cleanup",
          "memory_cleanup_interval_hours": "Memory cleanup interval (hours)"
        },
        "data_description": {
          "api_host": "API endpoint hostname. Use 'api.x.ai' for global routing or a specific regional endpoint: 'us-east-1.api.x.ai' or 'eu-west-1.api.x.ai'.",
          "use_extended_tools": "Enable to configure custom tools in Extended OpenAI Conversation format. When enabled, these tools will be available to all conversation agents that support extended tools.",
          "extended_tools_yaml": "Define your custom tools here. The format is fully compatible with Extended OpenAI Conversation. You can copy/paste your existing configuration.",
          "memory_user_ttl_hours": "Time-to-live for user conversations (smartphones, PCs, tablets). Default: 672 hours (28 days)",
          "memory_device_ttl_hours": "Time-to-live for device conversations (voice assistant satellites). Default: 672 hours (28 days)",
          "memory_remote_delete": "If enabled, whenever local messages are cleaned up (periodically or manually), they will also be permanently deleted from xAI's remote servers.",
          "memory_cleanup_interval_hours": "How often expired memory entries are cleaned up. Default: 24 hours"
        }
      }
    }
  },
  "config_subentries": {
    "conversation": {
      "initiate_flow": {
        "user": "Add conversational agent",
        "reconfigure": "Reconfigure conversational agent"
      },
      "entry_type": "conversation",
      "step": {
        "init": {
          "title": "xAI Conversation",
          "data": {
            "name": "Name",
            "store_messages": "Server-side Memory",
            "zero_data_retention": "Zero Data Retention (ZDR)",
            "use_intelligent_pipeline": "Enable Intelligent Pipeline",
            "allow_smart_home_control": "Allow smart home control",
            "use_extended_tools": "Use Extended Tools (Global Config)",
            "send_user_name": "Include user name in messages",
            "show_citations": "Show citations in chat",
            "assistant_name": "Assistant Name",
            "location_context": "Home Location",
            "live_search": "Live Search Mode",
            "pipeline_prompt": "Pipeline instructions (appended to default)",
            "prompt_tools": "Custom Prompt (Tools Mode)",
            "chat_model": "Model",
            "max_tokens": "Max tokens",
            "temperature": "Temperature",
            "top_p": "Top P",
            "reasoning_effort": "Reasoning effort"
          },
          "data_description": {
            "name": "Name of this conversational agent instance.",
            "store_messages": "Use xAI's server-side memory, which allows you to reduce the number of tokens sent with each request. Memory parameters (TTL, remote deletion) are configured at integration level.",
            "zero_data_retention": "Enables Zero Data Retention mode. History is not saved on xAI servers but managed locally via an encrypted blob. This option automatically disables Server-side Memory.",
            "use_intelligent_pipeline": "Enables a smart mode to automatically route commands to Home Assistant or provide conversational answers. If disabled, relies on the standard 'Home Assistant LLM API' for tool usage.",
            "allow_smart_home_control": "When enabled, your assistant can execute smart home commands. When disabled, your assistant responds conversationally without controlling devices. Changing this setting will start a new conversation.",
            "use_extended_tools": "Enable the use of custom tools defined in the main integration options (Extended OpenAI format). WARNING: Enabling this will disable standard Home Assistant native tools for this agent, regardless of mode.",
            "send_user_name": "Add the Home Assistant user name to the chat with Grok.",
            "show_citations": "Append search citations to chat responses. Useful for UI/chat interfaces but can be noisy for voice assistants. Default: OFF (recommended for voice).",
            "assistant_name": "The name your assistant will use to identify itself (e.g., 'Jarvis', 'Alexa', 'HAL'). Changing this will start a new conversation and previous chat history will not be accessible.",
            "location_context": "City or place where you live (e.g., 'Rome, IT'). Helps Grok with local searches like weather and news. If empty, uses the Home Assistant time zone.",
            "live_search": "Enable agentic search capabilities: 'off' (disabled), 'web search', 'x search', 'full' (web + x). Applies to both pipeline and tools modes.",
            "pipeline_prompt": "Optional text appended to the default pipeline prompt. Use it for custom intents or local rules.",
            "prompt_tools": "Custom instructions for the agent (tools mode only).",
            "chat_model": "Select the Grok model to use",
            "max_tokens": "Maximum number of tokens to generate",
            "temperature": "Controls randomness in responses (0.1 = deterministic, 2.0 = very creative, but not good to control house)",
            "top_p": "Controls diversity via nucleus sampling. Supported by all models.",
            "reasoning_effort": "Level of reasoning effort for supported models (low, high). Currently only available for grok-3-mini."
          }
        }
      },
      "abort": {
        "reconfigure_successful": "Configuration updated successfully!"
      }
    },
    "sensors": {
      "initiate_flow": {
        "user": "Add token sensors",
        "reconfigure": "Reconfigure token sensors"
      },
      "entry_type": "sensor",
      "step": {
        "init": {
          "title": "xAI Token Sensors",
          "data": {
            "name": "Name",
            "tokens_per_million": "Tokens per million",
            "xai_pricing_conversion_factor": "xAI pricing conversion factor",
            "pricing_update_interval_hours": "Pricing update interval (hours)"
          },
          "data_description": {
            "name": "Descriptive name for the token sensors.",
            "tokens_per_million": "Division factor for token pricing calculations. Default: 1,000,000.",
            "xai_pricing_conversion_factor": "xAI API returns prices in units that need conversion to USD per million tokens. Default: 10,000.",
            "pricing_update_interval_hours": "How often to fetch updated pricing from xAI API. Default: 48 hours."
          }
        }
      },
      "abort": {
        "reconfigure_successful": "Configuration updated successfully!"
      }
    },
    "ai_task": {
      "initiate_flow": {
        "user": "Add AI task",
        "reconfigure": "Reconfigure AI task"
      },
      "entry_type": "ai_task",
      "step": {
        "init": {
          "title": "xAI Task",
          "data": {
            "name": "Name",
            "ai_task_prompt": "Prompt",
            "vision_prompt": "Vision Prompt",
            "chat_model": "Model",
            "image_model": "Image Model",
            "vision_model": "Vision Model",
            "max_tokens": "Max tokens",
            "temperature": "Temperature",
            "top_p": "Top P",
            "reasoning_effort": "Reasoning effort"
          },
          "data_description": {
            "name": "Descriptive name for this AI task",
            "ai_task_prompt": "The entire system prompt for the AI task. This replaces the default. Be careful when editing, as it defines the task's behavior (e.g., JSON output format).",
            "vision_prompt": "System prompt for photo analysis. Defines how the vision model should analyze images (e.g., concise, detailed, factual).",
            "chat_model": "Select the Grok model to use",
            "image_model": "Model used exclusively for image generation",
            "vision_model": "Model used exclusively for photo analysis (documents, diagrams, charts, screenshots, photographs)",
            "max_tokens": "Maximum number of tokens to generate",
            "temperature": "Controls randomness in responses (0.0 = deterministic, 2.0 = very creative)",
            "top_p": "Controls diversity via nucleus sampling. Supported by all models.",
            "reasoning_effort": "Level of reasoning effort for supported models (low, high). Currently only available for grok-3-mini."
          }
        }
      },
      "abort": {
        "reconfigure_successful": "Configuration updated successfully!"
      }
    }
  },
  "services": {
    "clear_memory": {
      "name": "Clear Conversation Memory",
      "description": "Clear conversation memory for selected users or voice satellites. The service automatically handles both local and server-side data based on your configuration.",
      "fields": {
        "user_id": {
          "name": "Users",
          "description": "Select users whose conversation history should be cleared"
        },
        "satellite_id": {
          "name": "Voice Satellites",
          "description": "Select voice assistant devices whose conversation history should be cleared"
        },
        "delete_all": {
          "name": "Delete All",
          "description": "Clear ALL conversation memory (all users and devices). Use with caution."
        },
        "include_server": {
          "name": "Include Server Data",
          "description": "Also delete conversations stored on xAI servers (if any). Local-only data (ZDR mode) is always cleared."
        },
        "only_inactive": {
          "name": "Only Inactive Conversations",
          "description": "Only clear conversations that have been inactive for more than the configured period (default 28 days)."
        }
      }
    },
    "manage_sensors": {
      "name": "Manage Sensors",
      "description": "Perform maintenance operations on xAI integration sensors. Select one or both actions to execute.",
      "fields": {
        "reload_pricing": {
          "name": "Reload Pricing Data",
          "description": "Force refresh of model pricing data from xAI API."
        },
        "reset_stats": {
          "name": "Reset Token Statistics",
          "description": "Reset all token usage counters to zero."
        }
      }
    }
  }
}
